<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>IGEM/UP/1 Testing &amp; Purging Procedure Builder</title>
  <link rel="manifest" href="manifest.webmanifest" />
  <meta name="theme-color" content="#005ea5" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'; style-src 'self'; img-src 'self' data:; font-src 'self'; connect-src 'self'; object-src 'none'; base-uri 'self'; form-action 'self'; frame-ancestors 'self'; upgrade-insecure-requests" />
  <meta name="referrer" content="strict-origin-when-cross-origin" />
  <link rel="icon" type="image/png" sizes="192x192" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMAAAADACAYAAABS3GwHAAAD4UlEQVR4nO3T1Y4dVxCG0XLMkJiZOU/lMDMnDjjgMKPHHsPYTp5zpx5hLuaoNf2vklapLlu99VVd+W9ArLry74BYk38ATKme6AWpJv8AmNKGXpCqNjzZB4QSANEEQLTa8FQfEKoe6QWpBEC0euTpPiCUAIjWATwckKo2PvNwQCoBEE0ARKuNz/YBoQRAtNr03MMBqQRANAEQrTY93weEqs29IJUAiFabX+gDQgmAaB3AgwGpasuLDwakEgDRBEC02vJSHxBKAESrrb0gVW19uQ8IJQCiCYBotfWVPiBUbesFqWrbq31AqA7g/oBUAiBabX/t/oBUAiCaAIhW21/vA0IJgGi1oxekqh1v9AGhBEA0ARCtdrzZB4Sqnb0glQCIVjvfWhmQSgBEEwDRatfbKwNSCYBoteudPiCUAIgmAKLVo++ujLkxaz9Tv+miCMCsaqZ+UwEIYNKZ+k0XF8B7fcyMWfuZ+k0XpR7rNTdm7WfqN10UAZhVzdRvurgA3r835sas/Uz9posiALOqmfpNBQALULs/uDcglQCIJgCi1e4P+4BQAiBa7fno3oBUAiCaAIhWe672AaEEQLTae/XugFS19+M+IJQAiCYAotW+T+4OSCUAogmAaLXv0z4glACIVvt7Qara/1kfM2PWfqZ+00URgFnVTP2mAhDApDP1my4ugGt9zIxZ+5n6TRelDly7M+bGrP1M/aaLUgc+72NmzNrP1G+6KAIwq5qp31QAAph0pn7TxQXwRR8Qqg72glQCIFod/LIPCCUAogmAaHXoqzsDUgmAaAIgWh263geEqsPXbw9IJQCi1eGv+4BQAiCaAIhWR765PSCVAIhWR77tA0IJgGgCIFod/e72mJu5ztT/dY4EsI5m6v86RwJYRzP1f52jOvr98pibuc7U/3WOBLCOZur/Okd1rNfczHWm/q9zVMd+6GNm5jpT/9c5EsA6mqn/6xzNMgBYrTr+4/KAVAIgmgCIVsd/6gNCCYBodeLn5QGpBEA0ARCtTvxya0AqARCtTvaCVHXy1z4glACIJgCi1cnf+oBQdaoXpBIA0erU731AKAEQTQBEq9N/3BqQSgBE6wBuDkhVp//sA0LVmV6Qqs781QeEEgDRBEC0OvN3HxCqzvaCVAIgWp39pw8IJQCiCYBode7GzQGpOoClAakEQLQ6t9QHhBIA0ep8L0hV52/2AaEEQDQBEK0u3FoakEoARKsLy31AKAEQTQBEq4u3lwak6gBuDEglAKLVxTt9QCgBEK0u9YJUdeluHxBKAEQTANHq0r0+IFRd7gWpBEC0urzSB4QSANHq8fs3BqT6H8aeLkeeEG71AAAAAElFTkSuQmCC" />
  <link rel="icon" type="image/png" sizes="512x512" href="data:image/png;base64,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" />
  <link rel="apple-touch-icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAALVUlEQVR4nO3WV85lxQFG0QKanLqhocmZxqPCOeecjXPOiRwa7HFeFx5CXekvHe31SatUj+fhqLTHePm/JwAgZrz8nxMAELP9AwCAi7f9AwCAi7f9AwCAi7f9AwCAi7f9AwCAi7f9AwCAizc+Og8AoGX7BwAAF2/7BwAAF2/7BwAAF2/7BwAAF++meQAALQIAAIIEAAAEjZs+Ni8AQIoAAIAgAQAAQQIAAIIEAAAECQAACBIAABA0bvr4vAAAKQIAAIIEAAAEjZvnAQC0CAAACBIAABAkAAAgSAAAQNC4+RPzAgCkCAAACBIAABAkAAAgSAAAQJAAAICgGQAfnACAFgEAAEHjlk9+cAIAWgQAAAQJAAAIEgAAECQAACBIAABAkAAAgKBxy6fmBQBIEQAAECQAACBIAABAkAAAgCABAABB49I8AIAWAQAAQePSp+cFAEgRAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABI1Ln5kXACBFAABA0Lh1HgBAiwAAgCABAABBAgAAggQAAASNWz87LwBAigAAgCABAABBAgAAggQAAATNAHj/BAC0CAAACBIAABA0bvvc+ycAoEUAAECQAACAIAEAAEECAACCBAAABAkAAAgat31+XgCAFAEAAEECAACCBAAABAkAAAgSAAAQNG6fBwDQIgAAIGjc/oV5AQBSBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEHj9i/OCwCQIgAAIEgAAEDQuGMeAECLAACAIAEAAEECAACCxh1fmhcAIEUAAECQAACAoBkAN04AQIsAAIAgAQAAQQIAAIIEAAAEjTu/fOMEALQIAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAgsadX5kXACBFAABAkAAAgCABAABBAgAAgsZd8wAAWgQAAASNu746LwBAigAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBo3PW1eQEAUgQAAAQJAAAIGnfPAwBoEQAAECQAACBIAABA0Lj76/MCAKQIAAAImgHw3gkAaBEAABAkAAAgSAAAQJAAAIAgAQAAQePub8wLAJAy7pkHANAiAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAEjXu+OS8AQIoAAIAgAQAAQQIAAIIEAAAECQAACBr3zgMAaBn3fmteAIAUAcAyM9u73W8AxyYAWGZme7f7DeDYBADLzGzvdr8BHJsAYJmZ7d3uN4BjEwAsM7O92/0GcGwCgGVmtne73wCOTQCwzMz2bvcbwLGNe789L7DAzPZu9xvAsQkAlpnZ3u1+Azg2AcAyM9u73W8AxzbumwesMLO92/0GcGwCgGVmtne73wCOTQCwzMz2bvcbwLEJAJaZ2d7tfgM4thkA755ghZnt3e43gGMb931nXmCBme3d7jeAYxMALDOzvdv9BnBsAoBlZrZ3u98Ajk0AsMzM9m73G8CxCQCWmdne7X4DODYBwDIz27vdbwDHJgAAIGjc9915AQBSxv3zAABaBAAABAkAAAgSAAAQJAAAIEgAAECQAACAoHH/9+YFAEgRAAAQJAAAIEgAAECQAACAIAEAAEHj8jwAgJZx+fvzAgCkCAAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAILG5R/MCwCQIgAAIEgAAECQAACAoHFlHgBAiwAAgKAZAO+cAIAWAQAAQePKD+cFAEgRAAAQJAAAIEgAAECQAACAIAEAAEECAACCxpUfzQsAkDIemAcA0CIAACBIAABAkAAAgCABAABBAgAAggQAAASNB348LwBAigAAgCABAABBAgAAggQAAAQJAAAIGg/OAwBoEQAAEDQe/Mm8AAApAoBlZrZ3u98Ajk0AsMzM9m73G8CxCQCWmdne7X4DODYBwDIz27vdbwDHJgBYZmZ7t/sN4NgEAMvMbO92vwEc23jwlXmBBWa2d7vfAI5NALDMzPZu9xvAsQkAlpnZ3u1+Azg2AcAyM9u73W8AxzauvvL2CVaY2d7tfgM4NgHAMjPbu91vAMcmAFhmZnu3+w3g2AQAy8xs73a/ARzbuPrTeYEFZrZ3u98Ajk0AsMzM9m73G8CxCQCWmdne7X4DODYBwDIz27vdbwDHJgBYZmZ7t/sN4NgEAMvMbO92vwEcmwBgmZnt3e43gGMbV382LwBAigAAgKDx0DwAgBYBAABBAgAAggQAAAQJAAAIEgAAEDQe+vm8AAApAgAAggQAAAQJAAAIEgAAECQAACBIAABA0Hh4HgBAy3j4F/MCAKQIAAAIEgAAECQAACBIAABAkAAAgCABAABB4+FfzgsAkCIAACBIAABA0AyAt04AQMu4Ng8AoEUAAECQAACAIAEAAEHj2q/mBQBIEQAAECQAACBIAABAkAAAgCABAABBAgAAggQAAASNa7+eFwAgZTwyDwCgRQAAQJAAAIAgAQAAQQIAAIIEAAAEjUd+My8AQIoAAIAgAQAAQQIAAIIEAAAECQAACBIAABA0Hp0HANAyHv3tvAAAKQKAZWar2/3vAgKAM5itbve/CwgAzmC2ut3/LiAAOIPZ6nb/u4AA4Axmq9v97wICgDOYrW73vwt8GAC/mxdYYLa63f8u8P8AePMEK8xWt/vfBd4UAKwzW93ufxcQAJzBbHW7/11AAHAGs9Xt/neBGQCPzQNWmK1u978LCADOYLa63f8uIAA4g9nqdv+7wIcB8Pt5gQVmq9v97wICgDOYrW73vwsIAM5gtrrd/y4gADiD2ep2/7uAAOAMZqvb/e8CAoAzmK1u978LCADOYLa63f8uIAAAIGk89od5AQBSxuPzAABaBAAABAkAAAgSAAAQJAAAIEgAAEDQePyP8wIApAgAAAgSAAAQJAAAIEgAAECQAACAIAEAAEHjiXkAAC3jiT/NCwCQIgAAIEgAAECQAACAIAEAAEECAACCBAAABM0AeOMEALSMJ/48LwBAigAAgCABAABBAgAAgsaT8wAAWgQAAAQJAAAIGk/+ZV4AgBQBAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABA0Hjyr/MCAKQIAAAIGk/NAwBoEQAAECQAACBIAABAkAAAgKDx1N/mBQBIEQAAECQAACBIAABAkAAAgCABAABBAgAAggQAAASNp//+xgkAaBEAABAkAAAgSAAAQJAAAICgGQCvnwCAFgEAAEECAACCxtP/mBcAIEUAAECQAACAIAEAAEHjmXkAAC0CAACCBAAABI1n/jkvAECKAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIGg88695AQBSBAAABI1n5wEAtAgAAAgSAAAQJAAAIEgAAECQAACAoPHsv+cFAEgRAAAQJAAAIEgAAECQAACAIAEAAEECAACCxnOvvn4CAFoEAAAECQAACBIAABA0A+C1EwDQIgAAIEgAAECQAACAoPHca/MCAKQIAAAIEgAAECQAACBIAABA0Hh+HgBAiwAAgKDx/OvzAgCkCAAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAILG82/MCwCQIgAAIGi8MA8AoEUAAECQAACAIAEAAEECAACCBAAABI0X3pwXACBFAABAkAAAgCABAABBAgAAggQAAAQJAAAIGi++9doJAGgRAAAQNAPg1RMA0CIAACBIAABAkAAAgCABAABBAgAAgsaLb88LAJAiAAAgSAAAQJAAAIAgAQAAQeP6PACAFgEAAEECAACCxvV35gUASBEAABAkAAAgSAAAQJAAAIAgAQAAQQIAAILG9XfnBQBIEQAAECQAACBovDQPAKBFAABAkAAAgCABAABBAgAAgsZL780LAJAiAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAEjY/cePUEALT8D8rUiaNGiqYCAAAAAElFTkSuQmCC" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header>
    <h1>IGEM/UP/1 Testing &amp; Purging Procedure Builder</h1>
    <p>
      Use this planning template to assemble a site-specific procedure for testing and purging natural gas
      pipework in accordance with IGEM/UP/1. Complete each section, capture risk controls, and export the
      finished document for review and approval.
    </p>
  </header>
  <main>
    <section id="project-details">
      <h2>1. Project and Personnel Details</h2>
      <div class="two-column">
        <div>
          <label for="project-name">Project / Site Name</label>
          <input id="project-name" type="text" placeholder="e.g. ABC Manufacturing Plant" />
        </div>
        <div>
          <label for="location">Location</label>
          <input id="location" type="text" placeholder="Town / Postcode" />
        </div>
        <div>
          <label for="client">Client / Duty Holder</label>
          <input id="client" type="text" placeholder="Company or client representative" />
        </div>
        <div>
          <label for="prepared-by">Prepared By</label>
          <input id="prepared-by" type="text" placeholder="Engineer name &amp; role" />
        </div>
        <div>
          <label for="date">Procedure Date</label>
          <input id="date" type="date" />
        </div>
      </div>
    </section>

    <section id="system-overview">
      <h2>2. Pipework Overview</h2>
      <div class="two-column">
        <div>
          <label for="pipework-description">System Description</label>
          <textarea id="pipework-description" placeholder="Summarise pipe routes, sizes, materials and connected appliances"></textarea>
        </div>
        <div>
          <label for="drawing-reference">Drawings / References</label>
          <textarea id="drawing-reference" placeholder="Isometric drawings, schematics, IGEM references"></textarea>
        </div>
        <div>
          <label for="operating-pressure">
            Operating Pressure (mbar)
            <span
              class="info-icon"
              tabindex="0"
              role="button"
              aria-label="Explanation for operating pressure"
              data-popover="Working pressure under normal operating conditions. Used for baseline comparison with test pressures."
            ></span>
          </label>
          <input id="operating-pressure" type="number" min="0" step="0.1" />
        </div>
      </div>
      <div class="calculation-block" id="pipe-volume-calculator">
        <h3>Pipe, meter and purge volume estimator</h3>
        <p>
          Build the IGEM/UP/1 Table 3 and Table 4 volumes directly in the browser. Add every pipe segment that forms part of the
          test, including purge hoses listed alongside the pipe sizes, and select the installed diaphragm or rotary meters to
          replicate the worksheet logic. Pipe purge volumes use the same multiplier defined in IGEM/UP/1 Sheet 1.
        </p>
        <div class="pipe-table-wrapper">
          <table class="pipe-table">
            <thead>
              <tr>
                <th scope="col">Pipe size (DN)</th>
                <th scope="col">Length (m)</th>
                <th scope="col">Installation volume (m³)</th>
                <th scope="col">Purge volume (m³)</th>
                <th scope="col">Actions</th>
              </tr>
            </thead>
            <tbody id="pipe-rows"></tbody>
          </table>
          <button type="button" id="add-pipe-row" class="secondary-button">Add pipe segment</button>
          <div class="purge-hose-wrapper">
            <table class="pipe-table">
              <thead>
              <tr>
                <th scope="col">Purge hose size</th>
                <th scope="col">Length (m)</th>
                <th scope="col">Purge volume (m³)</th>
                <th scope="col" aria-hidden="true"></th>
              </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
                    <label class="sr-only" for="purge-hose-size">Purge hose size</label>
                    <select id="purge-hose-size"></select>
                  </td>
                  <td>
                    <label class="sr-only" for="purge-hose-length">Purge hose length</label>
                    <input id="purge-hose-length" type="number" min="0" step="0.01" placeholder="0.00" />
                  </td>
                  <td class="numeric">
                    <input
                      id="purge-hose-purge-volume"
                      type="text"
                      class="numeric-readonly"
                      inputmode="decimal"
                      readonly
                      aria-label="Purge hose purge volume"
                    />
                  </td>
                  <td aria-hidden="true">
                    <span class="table-action-placeholder" aria-hidden="true"></span>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <div class="pipe-inputs">
          <div class="meter-selection-wrapper">
            <div class="test-setup-block" aria-live="polite">
              <table class="data-table meter-table">
                <thead>
                  <tr>
                    <th scope="col">Diaphragm meter</th>
                    <th scope="col" class="numeric">Installation allowance (m³)</th>
                    <th scope="col" class="numeric">Purge allowance (m³)</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>
                      <label class="sr-only" for="diaphragm-meter-select">Diaphragm meter selection</label>
                      <select id="diaphragm-meter-select"></select>
                    </td>
                    <td id="diaphragm-meter-install" class="numeric"></td>
                    <td id="diaphragm-meter-purge" class="numeric"></td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="test-setup-block" aria-live="polite">
              <table class="data-table meter-table">
                <thead>
                  <tr>
                    <th scope="col">Rotary meter</th>
                    <th scope="col" class="numeric">Installation allowance (m³)</th>
                    <th scope="col" class="numeric">Purge allowance (m³)</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>
                      <label class="sr-only" for="rotary-meter-select">Rotary meter selection</label>
                      <select id="rotary-meter-select"></select>
                    </td>
                    <td id="rotary-meter-install" class="numeric"></td>
                    <td id="rotary-meter-purge" class="numeric"></td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          <div>
            <label for="purge-multiplier">
              Pipe purge multiplier
              <span
                class="info-icon"
                tabindex="0"
                role="button"
                aria-label="Explanation for purge multiplier"
                data-popover="Default IGEM/UP/1 logic uses a purge allowance of 1.5 × the installed pipe volume. Adjust only if the standard or project specification requires a different factor."
              ></span>
            </label>
            <input id="purge-multiplier" type="number" min="0" step="0.1" />
          </div>
        </div>
        <div class="calculation-results" id="pipe-volume-summary" role="status" aria-live="polite">
          Add at least one pipe segment to calculate installation and purge volumes.
        </div>
        <div class="test-setup-preview">
          <div class="test-setup-block test-setup-block--full">
            <table class="data-table">
              <caption>Table 12 – Maximum purge flow reference</caption>
              <thead>
                <tr>
                  <th scope="col">Pipe diameter to be purged</th>
                  <th scope="col" class="numeric">Maximum purge flow rate (m³/h)</th>
                  <th scope="col" class="numeric">Purge time at maximum flow (seconds)</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
                    <label class="sr-only" for="purge-pipe-diameter">Pipe diameter to be purged</label>
                    <select id="purge-pipe-diameter"></select>
                  </td>
                  <td class="numeric">
                    <label class="sr-only" for="purge-max-flow-rate">Maximum purge flow rate (m³/h)</label>
                    <input id="purge-max-flow-rate" type="text" class="numeric-readonly" readonly placeholder="Auto" />
                  </td>
                  <td class="numeric">
                    <label class="sr-only" for="purge-time-minutes">Purge time at maximum flow (seconds)</label>
                    <input id="purge-time-minutes" type="text" class="numeric-readonly" readonly placeholder="Auto" />
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
          <div class="test-setup-block test-setup-block--full">
            <table class="data-table">
              <caption>Table 6 – Gauge selection</caption>
              <thead>
                <tr>
                  <th scope="col">Gauge choice</th>
                  <th scope="col" class="numeric">Gauge range (mbar)</th>
                  <th scope="col" class="numeric">Gauge reading multiplier (GRM)</th>
                  <th scope="col" class="numeric">TTD max (minutes)</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
                    <label class="sr-only" for="gauge-choice">Gauge choice</label>
                    <select id="gauge-choice"></select>
                  </td>
                  <td class="numeric">
                    <label class="sr-only" for="gauge-range">Gauge range (mbar)</label>
                    <input id="gauge-range" type="text" class="numeric-readonly" readonly placeholder="Auto" />
                  </td>
                  <td class="numeric">
                    <label class="sr-only" for="gauge-grm">Gauge reading multiplier (GRM)</label>
                    <input id="gauge-grm" type="text" class="numeric-readonly" readonly placeholder="Auto" />
                  </td>
                  <td class="numeric">
                    <label class="sr-only" for="gauge-ttd-max">TTD max (minutes)</label>
                    <input id="gauge-ttd-max" type="text" class="numeric-readonly" readonly placeholder="Auto" />
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
          <div class="test-setup-block test-setup-block--full">
            <table class="data-table">
              <caption>Fuel type factors – F₁ reference</caption>
              <thead>
                <tr>
                  <th scope="col">Fuel type</th>
                  <th scope="col" class="numeric">Gas factor F₁ (gas purge)</th>
                  <th scope="col" class="numeric">Gas factor F₁ (nitrogen purge)</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
                    <label class="sr-only" for="gas-type-f1">Fuel selection for F₁</label>
                    <select id="gas-type-f1"></select>
                  </td>
                  <td class="numeric">
                    <label class="sr-only" for="gas-factor-f1-gas">Gas factor F₁ (gas purge)</label>
                    <input id="gas-factor-f1-gas" type="text" class="numeric-readonly" readonly placeholder="Auto" />
                  </td>
                  <td class="numeric">
                    <label class="sr-only" for="gas-factor-f1-n2">Gas factor F₁ (nitrogen purge)</label>
                    <input id="gas-factor-f1-n2" type="text" class="numeric-readonly" readonly placeholder="Auto" />
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
          <div class="test-setup-block test-setup-block--full">
            <table class="data-table">
              <caption>Fuel type factors – f₃ reference</caption>
              <thead>
                <tr>
                  <th scope="col">Fuel type</th>
                  <th scope="col" class="numeric">Operating factor f₃ (gas service)</th>
                  <th scope="col" class="numeric">Operating factor f₃ (nitrogen purge)</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
                    <label class="sr-only" for="gas-type-f3">Fuel selection for f₃</label>
                    <select id="gas-type-f3"></select>
                  </td>
                  <td class="numeric">
                    <label class="sr-only" for="operating-factor-f3-gas">Operating factor f₃ (gas service)</label>
                    <input id="operating-factor-f3-gas" type="text" class="numeric-readonly" readonly placeholder="Auto" />
                  </td>
                  <td class="numeric">
                    <label class="sr-only" for="operating-factor-f3-n2">Operating factor f₃ (nitrogen purge)</label>
                    <input id="operating-factor-f3-n2" type="text" class="numeric-readonly" readonly placeholder="Auto" />
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
          <p class="table-context">
            IGEM/UP/1 requirements, alongside the HSE gas safety guidance and National Gas emergency procedures, expect the
            testing plan to document the reference data that underpins TTD decisions. The tables below capture the gauge
            limits and F₁/f₃ factors so the procedure records the published allowances feeding into the plan.
          </p>
          <div class="ttd-panel">
            <h4>Time to discard (TTD) estimates</h4>
            <p class="ttd-panel-description">
              Combine the total installation volume from Step 5 with the gauge choice and gas factors to estimate TTD for
              different system categories. Enter the room volume to complete the in-place Type A calculation.
            </p>
            <div class="ttd-inputs">
              <div>
                <label for="ttd-step5">Step 5 – Total systems volume (m³)</label>
                <input id="ttd-step5" type="text" class="numeric-readonly" readonly placeholder="Auto" />
              </div>
              <div>
                <label for="ttd-room-volume">Room volume (m³)</label>
                <input id="ttd-room-volume" type="number" min="0" step="0.01" placeholder="Enter room volume" />
              </div>
              <div>
                <label for="ttd-area-type">Area type</label>
                <select id="ttd-area-type">
                  <option value="type-a">Inadequately ventilated areas (Area type A)</option>
                  <option value="type-b">Adequately ventilated internal areas of volume less than 60 m³ (Area Type B)</option>
                  <option value="type-c">
                    Adequately ventilated internal areas of volume 60 m³ or greater and external exposed areas (Area type C)
                  </option>
                  <option value="type-d">Underground (buried) (Area type D)</option>
                </select>
              </div>
              <div>
                <label for="ttd-from-above">TTD from above (minutes)</label>
                <input id="ttd-from-above" type="number" min="0" step="0.01" placeholder="Enter TTD" />
              </div>
              <div>
                <label for="gauge-movement">Gauge movement (mbar)</label>
                <input id="gauge-movement" type="number" min="0" step="0.01" placeholder="Enter gauge movement" />
              </div>
            </div>
            <table class="ttd-table">
              <thead>
                <tr>
                  <th scope="col">Scenario</th>
                  <th scope="col" class="numeric">TTD using gas (mins)</th>
                  <th scope="col" class="numeric">TTD using N₂ (mins)</th>
                </tr>
              </thead>
              <tbody>
                <tr id="ttd-row-type-a" data-area-types="type-b">
                  <th scope="row">TTD new/existing Type A</th>
                  <td>
                    <input id="ttd-gas-type-a" type="text" class="numeric-readonly" readonly placeholder="Auto" />
                  </td>
                  <td>
                    <input id="ttd-n2-type-a" type="text" class="numeric-readonly" readonly placeholder="Auto" />
                  </td>
                </tr>
                <tr id="ttd-row-type-cd" data-area-types="type-c,type-d">
                  <th scope="row">Existing Type C &amp; D</th>
                  <td>
                    <input id="ttd-gas-type-cd" type="text" class="numeric-readonly" readonly placeholder="Auto" />
                  </td>
                  <td>
                    <input id="ttd-n2-type-cd" type="text" class="numeric-readonly" readonly placeholder="Auto" />
                  </td>
                </tr>
                <tr id="ttd-row-type-a-in" data-area-types="type-a">
                  <th scope="row">Existing in Type A</th>
                  <td>
                    <input id="ttd-gas-type-a-in" type="text" class="numeric-readonly" readonly placeholder="Auto" />
                  </td>
                  <td>
                    <input id="ttd-n2-type-a-in" type="text" class="numeric-readonly" readonly placeholder="Auto" />
                  </td>
                </tr>
              </tbody>
            </table>
            <table class="ttd-table mplr-table">
              <caption>MPLR estimates</caption>
              <thead>
                <tr>
                  <th scope="col" class="numeric">MPLR gas</th>
                  <th scope="col" class="numeric">MPLR N₂</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td class="numeric">
                    <input
                      id="mplr-gas"
                      type="text"
                      class="numeric-readonly"
                      readonly
                      placeholder="Auto"
                      aria-label="Calculated MPLR using gas"
                    />
                  </td>
                  <td class="numeric">
                    <input
                      id="mplr-n2"
                      type="text"
                      class="numeric-readonly"
                      readonly
                      placeholder="Auto"
                      aria-label="Calculated MPLR using nitrogen"
                    />
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <details id="pipe-volume-details">
          <summary>Breakdown</summary>
          <div class="calculation-details">
            <h4>Installation build-up</h4>
            <table class="pipe-breakdown-table">
              <thead>
                <tr>
                  <th scope="col">Step</th>
                  <th scope="col" class="numeric">Volume (m³)</th>
                </tr>
              </thead>
              <tbody id="installation-breakdown-body"></tbody>
            </table>
            <h4>Purge build-up</h4>
            <table class="pipe-breakdown-table">
              <thead>
                <tr>
                  <th scope="col">Step</th>
                  <th scope="col" class="numeric">Volume (m³)</th>
                </tr>
              </thead>
              <tbody id="purge-breakdown-body"></tbody>
            </table>
            <h4>TTD calculation steps</h4>
            <table class="pipe-breakdown-table ttd-breakdown-table">
              <thead>
                <tr>
                  <th scope="col">Step</th>
                  <th scope="col" class="numeric">Gas (mins)</th>
                  <th scope="col" class="numeric">N₂ (mins)</th>
                </tr>
              </thead>
              <tbody id="ttd-breakdown-body"></tbody>
            </table>
            <p>
              Cross-check these totals with the latest IGEM/UP/1 publication on the IGEM technical services site and guidance in
              Section 8 to confirm that the chosen approach still reflects the published standard before issuing the procedure.
            </p>
          </div>
        </details>
        <input type="hidden" id="pipe-configuration" />
        <input type="hidden" id="calculated-system-volume" data-persist="never" />
        <input type="hidden" id="calculated-purge-volume" data-persist="never" />
      </div>
    </section>

    <section id="testing-plan">
      <h2>3. Strength &amp; Tightness Testing Plan</h2>
      <div class="two-column">
        <div>
          <label for="test-standard">Test Standard / Clause</label>
          <input id="test-standard" type="text" placeholder="e.g. IGEM/UP/1 6.2" />
        </div>
        <div>
          <label for="test-medium">Test Medium</label>
          <input id="test-medium" type="text" placeholder="e.g. Air, Nitrogen" />
        </div>
        <div>
          <label for="test-pressure">Test Pressure</label>
          <input id="test-pressure" type="text" placeholder="kPa or bar" />
        </div>
        <div>
          <label for="test-duration">Test Duration</label>
          <input id="test-duration" type="text" placeholder="minutes" />
        </div>
      </div>
      <label for="test-procedure">Detailed Procedure</label>
      <textarea id="test-procedure" placeholder="List steps including isolation, test instrument calibration, stabilisation time and acceptance criteria."></textarea>
      <div class="note">
        <strong>Reminder:</strong> Document instrument calibration dates and verify leak detection fluid compatibility with pipe materials.
      </div>
    </section>

    <section id="purging-plan">
      <h2>4. Purging Plan</h2>
      <div class="two-column">
        <div>
          <label for="purge-method">Purging Method</label>
          <select id="purge-method">
            <option value="direct">Direct Purging (IGEM/UP/1 Section 7)</option>
            <option value="indirect">Indirect Purging</option>
            <option value="vacuum">Vacuum Purging</option>
          </select>
        </div>
        <div>
          <label for="purge-medium">Purge Medium</label>
          <input id="purge-medium" type="text" placeholder="e.g. Nitrogen" />
        </div>
      </div>
      <label for="purge-steps">Step-by-Step Instructions</label>
      <textarea id="purge-steps" placeholder="Pre-purge checks, purge sequence, confirmation of gas-free atmosphere, recommissioning."></textarea>
    </section>

    <section id="risk-assessment">
      <h2>5. Risk Controls &amp; Permits</h2>
      <ul class="checklist">
        <li>
          <input id="permit" type="checkbox" />
          <label for="permit">Permit-to-work / authorisation in place</label>
        </li>
        <li>
          <input id="competence" type="checkbox" />
          <label for="competence">Competent personnel appointed and briefed</label>
        </li>
        <li>
          <input id="monitoring" type="checkbox" />
          <label for="monitoring">Continuous atmosphere monitoring arranged</label>
        </li>
        <li>
          <input id="ventilation" type="checkbox" />
          <label for="ventilation">Ventilation routes confirmed and ignition sources controlled</label>
        </li>
        <li>
          <input id="ppe" type="checkbox" />
          <label for="ppe">PPE requirements communicated</label>
        </li>
      </ul>
      <label for="additional-controls">Additional Risk Controls</label>
      <textarea id="additional-controls" placeholder="Gas detection, fire cover, emergency arrangements, communication plan"></textarea>
    </section>

    <section id="acceptance">
      <h2>6. Acceptance Criteria &amp; Sign-off</h2>
      <div class="two-column">
        <div>
          <label for="acceptance-criteria">Acceptance Criteria</label>
          <textarea id="acceptance-criteria" placeholder="Pressure loss limits, test medium purity, purge endpoint readings"></textarea>
        </div>
        <div>
          <label for="signoff">Sign-off Requirements</label>
          <textarea id="signoff" placeholder="Engineer signature, witness, client representative, record retention"></textarea>
        </div>
      </div>
      <div class="note">
        Store the final signed procedure within project QA documentation and retain for traceability in accordance with IGEM/UP/1 clause 10.
      </div>
    </section>

    <section id="summary">
      <h2>7. Procedure Output</h2>
      <label for="summary-notes">Summary Notes</label>
      <textarea id="summary-notes" placeholder="Capture key outcomes, deviations from standards, or special considerations"></textarea>
      <div class="download-controls">
        <button type="button" id="print-procedure">Print / Save as PDF</button>
        <button type="button" id="export-procedure">Download JSON</button>
        <button type="button" id="import-procedure">Load JSON</button>
        <button type="button" id="reset-form" class="secondary-button">Reset form</button>
        <input
          type="file"
          id="import-file"
          accept="application/json"
          class="sr-only-input"
          aria-label="Load saved procedure JSON"
        />
      </div>
    </section>

    <section id="reference-info">
      <h2>8. Supporting Information</h2>
      <details id="supporting-info-details">
        <summary>Show supporting resources</summary>
        <div class="supporting-info-body">
          <div class="info-links">
            <p>Reference material for further reading:</p>
            <ul>
              <li>
                <a href="https://igem.org.uk/technical-services/standards-and-guidance/igemup1" target="_blank" rel="noopener noreferrer">
                  IGEM/UP/1 Edition 3 – Strength testing, tightness testing and direct purging of industrial and commercial gas installations
                </a>
              </li>
              <li>
                <a
                  href="https://www.igem.org.uk/resource/ige-up-1-edition-2-a-2005-strength-testing-tightness-testing-direct-purging-of-industrial-and-commercial-gas-installations.html"
                  target="_blank"
                  rel="noopener noreferrer"
                >
                  Purchase IGEM/UP/1 Edition 2 (A) 2005 – Strength testing, tightness testing &amp; direct purging
                </a>
              </li>
              <li>
                <a href="https://www.hse.gov.uk/gas/" target="_blank" rel="noopener noreferrer">UK Health and Safety Executive – Gas safety guidance</a>
              </li>
              <li>
                <a href="https://www.nationalgas.com/safety" target="_blank" rel="noopener noreferrer">National Gas – Safety and emergency procedures</a>
              </li>
            </ul>
          </div>
          <div class="version-info">
            <h3>Version traceability</h3>
            <p>
              Procedure builder version <strong id="app-version">—</strong><br />
              Gas sizing dataset version <strong id="data-version">—</strong>
            </p>
            <p class="version-note">
              Record these identifiers when printing or exporting so that any future corrections can be applied to the correct release.
            </p>
          </div>
          <div class="reference-tables">
            <h3>Reference tables</h3>
            <p>
              Open a table to review the IGEM/UP/1 data behind the calculator. Each table opens on demand so the main workflow stays uncluttered on smaller screens.
            </p>
            <div id="igem-reference-table-container" class="reference-table-container">
              <p>Reference tables load when JavaScript is available.</p>
            </div>
          </div>
        </div>
      </details>
    </section>
  </main>

  <footer>
    © <span id="year"></span> Testing &amp; Purging Procedure Template · Aligns with IGEM/UP/1 good practice.
  </footer>

  <script type="module" src="app.js"></script>

</body>
</html>
